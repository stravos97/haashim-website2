---
import ThemeToggle from '../components/ThemeToggle.astro';

interface Props {
  title: string;
  description?: string;
}

const { title, description = "Haashim Alvi - DevOps Engineer & Cloud Infrastructure Specialist" } = Astro.props;
---

<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    
    <!-- Preconnect to font providers -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Load fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Theme initialization script (prevent flash) - Default to dark mode -->
    <script is:inline>
      const theme = localStorage.getItem('theme') || 'dark';
      document.documentElement.setAttribute('data-theme', theme);
    </script>
  </head>
  <body>
    <div class="background-pattern"></div>
    <ThemeToggle />
    <div class="scroll-progress" id="scroll-progress"></div>
    <slot />
    <button id="back-to-top" class="back-to-top" aria-label="Back to top">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 19V5M5 12l7-7 7 7"/>
      </svg>
    </button>
  </body>
</html>

<style is:global>
/* ============================================
   WCAG 2.2 & GOV.UK DESIGN SYSTEM - 2025 STANDARDS
   ============================================ */
:root {
  /* Typography - WCAG 2.2 & GOV.UK compliant */
  --font-primary: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, Helvetica, sans-serif;
  --font-mono: 'Courier New', monospace;
  
  /* GOV.UK Spacing Scale (multiples of 5px) */
  --spacing-0: 0;
  --spacing-1: 5px;
  --spacing-2: 10px;
  --spacing-3: 15px;
  --spacing-4: 20px;
  --spacing-5: 25px;
  --spacing-6: 30px;
  --spacing-7: 40px;
  --spacing-8: 50px;
  --spacing-9: 60px;
  
  /* WCAG 2.2 Typography Scale (optimized for readability) */
  --font-size-80: 53px;
  --font-size-48: 48px;
  --font-size-36: 36px;
  --font-size-27: 27px;
  --font-size-24: 24px;
  --font-size-19: 19px; /* Optimal body text */
  --font-size-18: 18px;
  --font-size-16: 16px; /* Minimum accessible size */
  --font-size-14: 14px;
  
  /* WCAG 2.2 Line heights for readability */
  --line-height-tight: 1.3;
  --line-height-normal: 1.5;
  --line-height-loose: 1.65;
  --line-height-body: 1.6; /* Optimal for body text */
  
  /* Character & Word Spacing (WCAG 2.2) */
  --letter-spacing-normal: 0.01em;
  --letter-spacing-wide: 0.12em; /* WCAG minimum */
  --word-spacing: 0.16em; /* WCAG minimum */
  
  /* Optimal readability constraints */
  --max-width-content: 66ch; /* 66 characters ideal line length */
  --max-width-page: 1020px;
  
  /* Touch target sizes (WCAG 2.2) */
  --target-size-minimum: 24px; /* WCAG 2.2 AA */
  --target-size-recommended: 44px; /* Best practice */
  --target-spacing: 8px; /* Minimum spacing between targets */
  
  /* Transitions (respecting prefers-reduced-motion) */
  --transition-fast: 150ms ease-out;
  --transition-base: 250ms ease-out;
  
  /* WCAG 2.2 Focus indicators */
  --focus-width: 3px;
  --focus-offset: 2px;
  --focus-contrast-ratio: 3; /* 3:1 minimum contrast */
}

/* WCAG 2.2 Light Theme - Enhanced Contrast (2025) */
[data-theme="light"] {
  /* Primary colors - WCAG AAA where possible */
  --color-text: #0b0c0c; /* Near-black for maximum readability */
  --color-text-secondary: #505a5f; /* 7.5:1 contrast */
  --color-text-tertiary: #626a6e; /* 5.8:1 contrast */
  --color-link: #1d70b8; /* 4.5:1 contrast minimum */
  --color-link-visited: #4c2c92; /* Distinct visited state */
  --color-link-hover: #003078; /* Darker on hover */
  --color-link-active: #0b0c0c; /* Maximum contrast when active */
  
  /* Backgrounds with proper layering */
  --color-bg: #ffffff;
  --color-bg-secondary: #f3f2f1;
  --color-bg-tertiary: #f8f8f8;
  --color-bg-hover: #e8f0fe; /* Subtle hover state */
  
  /* WCAG 2.2 Focus indicators (3:1 contrast) */
  --color-focus: #ffdd00; /* High visibility yellow */
  --color-focus-text: #0b0c0c; /* Text on focus background */
  --color-focus-border: #0b0c0c; /* Border for double indication */
  
  /* Borders and dividers */
  --color-border: #b1b4b6;
  --color-border-input: #0b0c0c;
  --color-border-focus: #ffdd00;
  
  /* Status colors (WCAG compliant) */
  --color-success: #00703c; /* 4.6:1 contrast */
  --color-warning: #f47738; /* With dark text */
  --color-error: #d4351c; /* 4.5:1 contrast */
  --color-info: #1d70b8; /* Matches link color */
  
  /* Primary brand */
  --color-primary: #1d70b8;
  --color-primary-dark: #003078;
  
  /* Shadows for depth perception */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
}

/* WCAG 2.2 Dark Theme - Enhanced Contrast (2025) */
[data-theme="dark"] {
  /* Primary colors - WCAG AAA where possible */
  --color-text: #ffffff; /* Pure white for maximum contrast */
  --color-text-secondary: #e4e4e7; /* 13:1 contrast */
  --color-text-tertiary: #a1a1aa; /* 7:1 contrast */
  --color-link: #8ac5ff; /* 4.5:1 contrast minimum */
  --color-link-visited: #c9a1ff; /* Distinct visited state */
  --color-link-hover: #b3d9ff; /* Lighter on hover */
  --color-link-active: #ffffff; /* Maximum contrast when active */
  
  /* Backgrounds with proper layering */
  --color-bg: #0b0c0c; /* Near-black background */
  --color-bg-secondary: #1a1a1a;
  --color-bg-tertiary: #2a2a2a;
  --color-bg-hover: #18181b; /* Subtle hover state */
  
  /* WCAG 2.2 Focus indicators (3:1 contrast) */
  --color-focus: #ffdd00; /* High visibility yellow */
  --color-focus-text: #0b0c0c; /* Dark text on focus */
  --color-focus-border: #ffdd00; /* Border for double indication */
  
  /* Borders and dividers */
  --color-border: #505a5f;
  --color-border-input: #ffffff;
  --color-border-focus: #ffdd00;
  
  /* Status colors (WCAG compliant for dark mode) */
  --color-success: #5ae983; /* 4.5:1 contrast */
  --color-warning: #ffaa33; /* With dark text */
  --color-error: #ff5c5c; /* 4.5:1 contrast */
  --color-info: #8ac5ff; /* Matches link color */
  
  /* Primary brand */
  --color-primary: #8ac5ff;
  --color-primary-dark: #5a9fd4;
  
  /* Shadows for depth perception */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.2);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.4);
}

/* ============================================
   GOV.UK BASE STYLES & RESET
   ============================================ */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  font-family: var(--font-primary);
  font-size: 100%; /* Base 16px */
  line-height: var(--line-height-normal);
  font-weight: 400;
  color: var(--color-text);
  background: var(--color-bg);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

body {
  min-height: 100vh;
  font-size: var(--font-size-19); /* 19px optimal for readability */
  line-height: var(--line-height-body); /* 1.6 for body text */
  letter-spacing: var(--letter-spacing-normal);
  word-spacing: var(--word-spacing);
  overflow-x: hidden;
  /* Support text spacing customization */
  font-size-adjust: 0.5;
  text-rendering: optimizeLegibility;
  /* Improve readability on all screens */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* WCAG 2.2 Enhanced Focus Indicators (3:1 contrast) */
*:focus {
  outline: var(--focus-width) solid var(--color-focus);
  outline-offset: var(--focus-offset);
  box-shadow: 0 0 0 var(--focus-offset) var(--color-focus-border);
  background-color: var(--color-focus);
  color: var(--color-focus-text);
  /* Ensure focus is never obscured */
  position: relative;
  z-index: 10;
}

/* Focus visible only for keyboard navigation */
*:focus:not(:focus-visible) {
  outline: none;
  box-shadow: none;
  background-color: transparent;
  color: inherit;
}

*:focus-visible {
  outline: var(--focus-width) solid var(--color-focus);
  outline-offset: var(--focus-offset);
  box-shadow: 0 0 0 var(--focus-offset) var(--color-focus-border);
}

/* WCAG 2.2 Link Patterns with Enhanced States */
a {
  color: var(--color-link);
  text-underline-offset: 0.1em;
  text-decoration-thickness: 2px;
  /* Ensure minimum touch target */
  display: inline-block;
  min-height: var(--target-size-minimum);
  padding: 2px 4px;
  margin: -2px -4px;
}

a:visited {
  color: var(--color-link-visited);
}

a:hover {
  color: var(--color-link-hover);
  text-decoration-thickness: 3px;
  background-color: var(--color-bg-hover);
}

a:active {
  color: var(--color-link-active);
  text-decoration-thickness: 4px;
}

a:focus {
  background-color: var(--color-focus);
  color: var(--color-focus-text);
  outline: var(--focus-width) solid var(--color-focus-border);
  outline-offset: 0;
  text-decoration: none;
  box-shadow: 0 0 0 var(--focus-offset) var(--color-focus);
}

/* ============================================
   SIMPLIFIED BACKGROUND (GOV.UK STYLE)
   ============================================ */
.background-pattern {
  display: none; /* Remove decorative patterns for clarity */
}

/* Scroll Progress Bar - Simplified */
.scroll-progress {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: var(--color-primary);
  transform-origin: left;
  transform: scaleX(0);
  z-index: 1001;
  transition: transform 0.1s ease-out;
}

/* WCAG 2.2 Back to Top Button - 44x44 touch target */
.back-to-top {
  position: fixed;
  bottom: var(--spacing-4);
  right: var(--spacing-4);
  /* Ensure 44x44 minimum touch target */
  min-width: var(--target-size-recommended);
  min-height: var(--target-size-recommended);
  padding: var(--spacing-2);
  background: var(--color-primary);
  color: #ffffff;
  border: 2px solid var(--color-primary);
  font-size: var(--font-size-16);
  font-weight: 700;
  cursor: pointer;
  opacity: 0;
  visibility: hidden;
  transform: translateY(20px);
  transition: all var(--transition-base);
  z-index: 999;
  /* Center icon/text */
  display: flex;
  align-items: center;
  justify-content: center;
}

.back-to-top.visible {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.back-to-top:hover {
  background: var(--color-primary-dark);
  border-color: var(--color-primary-dark);
}

.back-to-top:focus {
  outline: var(--focus-width) solid var(--color-focus);
  outline-offset: 0;
  background-color: var(--color-focus);
  color: var(--color-text);
  border-color: var(--color-text);
}

/* ============================================
   GOV.UK LAYOUT COMPONENTS
   ============================================ */
main {
  margin: 0 auto;
  padding: var(--spacing-6) var(--spacing-4);
  max-width: var(--max-width-page);
  position: relative;
}

/* GOV.UK Section Styles - Clean and Accessible */
section {
  margin-bottom: var(--spacing-8);
  padding: var(--spacing-6) 0;
  border-bottom: 1px solid var(--color-border);
  max-width: var(--max-width-content);
}

section:last-child {
  border-bottom: none;
}

/* Content wrapper for optimal line length */
.content-wrapper {
  max-width: var(--max-width-content);
  margin: 0 auto;
}

/* ============================================
   GOV.UK TYPOGRAPHY
   ============================================ */
h1, h2, h3, h4, h5, h6 {
  font-weight: 700;
  color: var(--color-text);
  margin: 0;
  line-height: var(--line-height-tight);
}

h1 { 
  font-size: var(--font-size-48);
  margin-bottom: var(--spacing-6);
}

h2 { 
  font-size: var(--font-size-36);
  margin-top: var(--spacing-8);
  margin-bottom: var(--spacing-4);
}

h3 { 
  font-size: var(--font-size-24);
  margin-top: var(--spacing-6);
  margin-bottom: var(--spacing-3);
}

h4 { 
  font-size: var(--font-size-19);
  margin-top: var(--spacing-4);
  margin-bottom: var(--spacing-2);
}

p {
  margin-bottom: var(--spacing-4);
  max-width: var(--max-width-content); /* 66ch for optimal readability */
  line-height: var(--line-height-body);
  /* WCAG 2.2 text spacing */
  letter-spacing: var(--letter-spacing-normal);
  word-spacing: var(--word-spacing);
  /* Improve readability */
  hyphens: auto;
  word-break: break-word;
  overflow-wrap: break-word;
}

/* Lists */
ul, ol {
  margin-bottom: var(--spacing-4);
  padding-left: var(--spacing-4);
  max-width: var(--max-width-content);
}

li {
  margin-bottom: var(--spacing-2);
  line-height: var(--line-height-normal);
}

/* Lead paragraph */
.lead {
  font-size: var(--font-size-24);
  line-height: var(--line-height-loose);
  margin-bottom: var(--spacing-6);
}

/* Small text */
.text-small {
  font-size: var(--font-size-16);
}

/* ============================================
   GOV.UK UTILITY CLASSES
   ============================================ */
.govuk-width-container {
  max-width: var(--max-width-page);
  margin: 0 auto;
  padding: 0 var(--spacing-3);
}

.govuk-main-wrapper {
  padding-top: var(--spacing-4);
  padding-bottom: var(--spacing-8);
}

/* Visually hidden but accessible to screen readers */
.govuk-visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  margin: -1px;
  padding: 0;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* ============================================
   GOV.UK RESPONSIVE DESIGN
   ============================================ */
@media (max-width: 768px) {
  /* Responsive typography scale */
  h1 { 
    font-size: var(--font-size-36);
  }
  
  h2 { 
    font-size: var(--font-size-27);
  }
  
  h3 { 
    font-size: var(--font-size-19);
  }
  
  body {
    font-size: var(--font-size-16);
  }
  
  main {
    padding: var(--spacing-3);
  }
  
  section {
    padding: var(--spacing-4) 0;
    margin-bottom: var(--spacing-6);
  }
}


/* ============================================
   REDUCED MOTION SUPPORT
   ============================================ */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ============================================
   PRINT STYLES
   ============================================ */
@media print {
  /* Hide non-printable elements */
  .background-pattern,
  .scroll-progress,
  .back-to-top,
  .theme-toggle,
  .print-button,
  .nav-container {
    display: none !important;
  }

  /* Reset basic styles for print */
  * {
    background: white !important;
    color: black !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }

  html {
    font-size: 11pt !important;
  }

  body {
    background: white !important;
    color: black !important;
    line-height: 1.5 !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  main {
    max-width: 100% !important;
    padding: 0 !important;
    margin: 0 !important;
  }

  /* Typography for print */
  h1 {
    font-size: 20pt !important;
    font-weight: bold !important;
    margin-bottom: 8pt !important;
    page-break-after: avoid !important;
  }

  h2 {
    font-size: 16pt !important;
    font-weight: bold !important;
    margin-top: 12pt !important;
    margin-bottom: 6pt !important;
    page-break-after: avoid !important;
    border-bottom: 1px solid #ddd !important;
    padding-bottom: 4pt !important;
  }

  h3 {
    font-size: 12pt !important;
    font-weight: bold !important;
    margin-top: 8pt !important;
    margin-bottom: 4pt !important;
    page-break-after: avoid !important;
  }

  p, li {
    font-size: 10pt !important;
    line-height: 1.4 !important;
    orphans: 3 !important;
    widows: 3 !important;
  }

  /* Section styles for print */
  section {
    background: white !important;
    border: none !important;
    border-radius: 0 !important;
    padding: 8pt 0 !important;
    margin-bottom: 12pt !important;
    page-break-inside: avoid !important;
  }

  /* Hero section for print */
  .hero {
    background: white !important;
    color: black !important;
    text-align: left !important;
    padding: 0 0 12pt 0 !important;
    margin-bottom: 12pt !important;
    border-bottom: 2px solid #333 !important;
    border-radius: 0 !important;
  }

  .hero-name {
    font-size: 24pt !important;
    color: black !important;
  }

  .hero-title {
    font-size: 14pt !important;
    color: #333 !important;
    margin-bottom: 6pt !important;
  }

  .hero-summary {
    font-size: 10pt !important;
    color: #555 !important;
    margin-bottom: 8pt !important;
  }

  /* Contact links for print */
  .contact-links {
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 8pt !important;
    justify-content: flex-start !important;
  }

  .contact-links a {
    background: white !important;
    color: black !important;
    border: 1px solid #999 !important;
    padding: 2pt 6pt !important;
    font-size: 9pt !important;
    text-decoration: none !important;
    border-radius: 0 !important;
  }

  .contact-links a svg {
    display: none !important;
  }

  .contact-links a span {
    display: inline !important;
  }

  .contact-links a::after {
    content: " (" attr(href) ")" !important;
    font-size: 8pt !important;
    color: #666 !important;
  }

  /* Experience cards for print */
  .experience-card {
    page-break-inside: avoid !important;
    margin-bottom: 10pt !important;
  }

  .experience-content {
    background: white !important;
    border: 1px solid #ddd !important;
    border-radius: 0 !important;
    padding: 6pt !important;
  }

  .experience-header h3 {
    font-size: 11pt !important;
    margin-bottom: 2pt !important;
  }

  .company {
    font-size: 10pt !important;
    font-weight: bold !important;
    color: #333 !important;
  }

  .experience-meta span {
    background: white !important;
    border: 1px solid #999 !important;
    padding: 1pt 4pt !important;
    font-size: 8pt !important;
    border-radius: 0 !important;
  }

  .experience-points li {
    font-size: 9pt !important;
    margin-bottom: 2pt !important;
  }

  /* Project cards for print */
  .projects-grid {
    display: block !important;
  }

  .project-card {
    page-break-inside: avoid !important;
    border: 1px solid #ddd !important;
    padding: 6pt !important;
    margin-bottom: 8pt !important;
    border-radius: 0 !important;
  }

  .project-header h3 {
    font-size: 11pt !important;
  }

  .project-links {
    display: none !important;
  }

  .project-description {
    font-size: 9pt !important;
    margin-bottom: 4pt !important;
  }

  .tech-tag {
    background: white !important;
    border: 1px solid #999 !important;
    padding: 1pt 3pt !important;
    font-size: 8pt !important;
    border-radius: 0 !important;
  }

  .project-achievements li {
    font-size: 9pt !important;
    margin-bottom: 2pt !important;
  }

  /* Skills for print */
  .skills-grid {
    display: block !important;
  }

  .skill-category {
    margin-bottom: 8pt !important;
  }

  .skill-category h3 {
    font-size: 10pt !important;
    margin-bottom: 4pt !important;
  }

  .skill-tag {
    background: white !important;
    border: 1px solid #999 !important;
    padding: 1pt 4pt !important;
    font-size: 8pt !important;
    margin-right: 4pt !important;
    margin-bottom: 2pt !important;
    display: inline-block !important;
    border-radius: 0 !important;
  }

  /* Education for print */
  .education-card {
    background: white !important;
    border: 1px solid #ddd !important;
    padding: 6pt !important;
    margin-bottom: 8pt !important;
    page-break-inside: avoid !important;
    border-radius: 0 !important;
  }

  .education-card h3 {
    font-size: 11pt !important;
  }

  .institution {
    font-size: 10pt !important;
    color: #333 !important;
  }

  .education-meta span {
    background: white !important;
    border: 1px solid #999 !important;
    padding: 1pt 4pt !important;
    font-size: 8pt !important;
    border-radius: 0 !important;
  }

  .modules li {
    font-size: 9pt !important;
  }

  /* Certifications for print */
  .certifications-grid {
    display: block !important;
  }

  .certification-card {
    background: white !important;
    border: 1px solid #ddd !important;
    padding: 4pt !important;
    margin-bottom: 4pt !important;
    page-break-inside: avoid !important;
    border-radius: 0 !important;
  }

  .certification-card svg {
    display: none !important;
  }

  .certification-card span {
    font-size: 9pt !important;
  }

  /* Footer for print */
  footer {
    display: none !important;
  }

  /* Links in print */
  a {
    color: black !important;
    text-decoration: underline !important;
  }

  /* Page breaks */
  .page-break {
    page-break-after: always !important;
  }

  .no-break {
    page-break-inside: avoid !important;
  }
}
</style>

<script>
  // Scroll progress bar
  const updateScrollProgress = () => {
    const scrollProgress = document.getElementById('scroll-progress');
    if (scrollProgress) {
      const scrollTop = window.scrollY;
      const docHeight = document.documentElement.scrollHeight - window.innerHeight;
      const scrollPercent = scrollTop / docHeight;
      scrollProgress.style.transform = `scaleX(${scrollPercent})`;
    }
  };

  // Back to top button
  const backToTop = document.getElementById('back-to-top');
  const toggleBackToTop = () => {
    if (backToTop) {
      if (window.scrollY > 300) {
        backToTop.classList.add('visible');
      } else {
        backToTop.classList.remove('visible');
      }
    }
  };

  backToTop?.addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

  // Event listeners
  window.addEventListener('scroll', () => {
    updateScrollProgress();
    toggleBackToTop();
  });

  // Initial call
  updateScrollProgress();
  toggleBackToTop();
</script>